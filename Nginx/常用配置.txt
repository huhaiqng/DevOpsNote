1、限制连接频率
http {
    # 定义连接区域
	limit_conn_zone $binary_remote_addr zone=conn_zone:1m;
    server {
	    location / {
		    # 限制同一 IP 每秒连接一次
			limit_conn conn_zone 1;
		}
	}
}

2、限制请求频率
http {
    # 定义请求区域
	limit_req_zone $binary_remote_addr zone=req_zone:2m rate=1r/s;
    server {
	    location / {
		    # 限制同一 IP 每秒请求一次
			limit_req zone=req_zone;
			# limit_req zone=req_zone burst=3 nodelay;
			# burst=3 把超过的3个请求往后延，超过3个的直接拒绝访问
		}
	}
}

3、访问控制
location ~ ^/hello/ {
    root /var/www/html;
	deny 192.168.1.60;
	allow all;
}
# ~ 开启模式匹配，^/hello/ 匹配以 /hello/ 的 uri

4、多层 nginx 反向代理，$remote_addr 获取客户端真实 IP
http {
    set_real_ip_from  172.16.1.52;
    real_ip_header    X-Real-IP;
}